import{_ as E,C as I,D as U,g as d,v as b,h as O,c as a,a as e,b as q,w as G,t as l,F as j,i as A,y as R,N as H,z as J,j as c,n as _,e as h,d as K,O as Q,M as W,r as X,o as i}from"./index-f19ebc4a.js";const Y={class:"min-h-screen bg-gray-50"},Z={class:"bg-white shadow-sm border-b border-gray-200"},ee={class:"max-w-7xl mx-auto px-6 py-4"},te={class:"flex items-center space-x-3"},se={class:"max-w-4xl mx-auto px-6 py-8"},oe={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},le={class:"lg:col-span-2"},ae={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6"},ie={class:"flex items-center"},ne={class:"text-3xl font-bold text-gray-900"},re={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6"},de={class:"grid grid-cols-2 md:grid-cols-3 gap-4"},ce=["onClick"],ue={key:0,class:"absolute -top-2 -right-2"},me={class:"text-center"},ve={class:"text-lg font-bold text-gray-900"},ge={class:"text-sm text-gray-600 mt-1"},fe={key:0,class:"text-xs text-green-600 mt-1"},xe={key:1,class:"absolute top-2 right-2"},be={class:"mt-6 p-4 border border-gray-200 rounded-lg"},pe={class:"flex items-center mb-3"},ye={key:0,class:"flex items-center space-x-4"},_e={class:"flex-1"},he={class:"relative"},we={class:"text-sm text-gray-600"},ke={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Ce={class:"space-y-3"},Pe=["onClick"],Se={class:"flex-1 flex items-center"},Ve={class:"font-medium text-gray-900"},Le={class:"text-sm text-gray-500"},Me={key:0},je={class:"lg:col-span-1"},Ae={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 sticky top-6"},Re={class:"space-y-3"},Be={class:"flex justify-between text-sm"},Ne={class:"font-medium"},De={class:"flex justify-between text-sm"},Fe={class:"font-medium"},$e={key:0,class:"flex justify-between text-sm"},Te={class:"font-medium text-green-600"},ze={class:"border-t border-gray-200 pt-3"},Ee={class:"flex justify-between"},Ie={class:"text-lg font-bold text-indigo-600"},Ue={class:"mt-6"},Oe=["disabled"],qe={key:0,class:"fas fa-spinner fa-spin mr-2"},Ge={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},He={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Je={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6"},Ke={class:"sm:flex sm:items-start"},Qe={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},We={class:"mt-2"},Xe={class:"text-sm text-gray-500"},Ye={class:"text-sm text-gray-500 mt-1"},Ze={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},et=["disabled"],tt={key:0,class:"fas fa-spinner fa-spin mr-2"},st=["disabled"],ot={__name:"RechargeView",setup(lt){const B=I(),w=U(),S=d(0),u=d(null),m=d(!1),r=d(""),v=d(null),g=d(!1),n=d(!1),N=d([{id:1,price:10,points:1e3,bonus:0,recommended:!1},{id:2,price:50,points:5e3,bonus:500,recommended:!0},{id:3,price:100,points:1e4,bonus:1500,recommended:!1},{id:4,price:200,points:2e4,bonus:4e3,recommended:!1},{id:5,price:500,points:5e4,bonus:12500,recommended:!1},{id:6,price:1e3,points:1e5,bonus:3e4,recommended:!1}]),V=d([{id:"alipay",name:"支付宝",description:"支持支付宝扫码支付",icon:"fab fa-alipay text-blue-500"},{id:"wechat",name:"微信支付",description:"支持微信扫码支付",icon:"fab fa-weixin text-green-500"},{id:"credit",name:"银行卡",description:"支持信用卡、储蓄卡",icon:"fas fa-credit-card text-gray-600"}]),p=b(()=>{var o;return m.value&&r.value?parseFloat(r.value)||0:((o=u.value)==null?void 0:o.price)||0}),L=b(()=>{var o;return m.value&&r.value?Math.floor((parseFloat(r.value)||0)*100):((o=u.value)==null?void 0:o.points)||0}),k=b(()=>{var o;return m.value?0:((o=u.value)==null?void 0:o.bonus)||0}),C=b(()=>L.value+k.value),P=b(()=>(m.value?r.value&&parseFloat(r.value)>=1:u.value)&&v.value),D=o=>{u.value=o,m.value=!1,r.value=""},F=()=>{P.value&&(g.value=!0)},$=async()=>{var o;if(!n.value){n.value=!0;try{const t={amount:Math.round(p.value*100),points:C.value,paymentMethod:v.value.id,packageId:((o=u.value)==null?void 0:o.id)||null},y=await Q.createRecharge(t);if(y.status==="success")w.success("充值订单创建成功，正在跳转到支付页面..."),setTimeout(()=>{w.success("充值成功！点数已到账"),B.push("/profile")},2e3);else throw new Error(y.message||"充值失败")}catch(t){console.error("充值失败:",t),w.error(t.message||"充值失败，请稍后重试")}finally{n.value=!1,g.value=!1}}},T=async()=>{try{const o=await W.getPointsBalance();o.status==="success"&&(S.value=o.data.points)}catch(o){console.error("获取余额失败:",o)}};return O(()=>{T(),v.value=V.value[0]}),(o,t)=>{var M;const y=X("router-link");return i(),a("div",Y,[e("div",Z,[e("div",ee,[e("div",te,[q(y,{to:"/profile",class:"text-gray-500 hover:text-gray-700 transition-colors"},{default:G(()=>t[4]||(t[4]=[e("i",{class:"fas fa-arrow-left text-lg"},null,-1)])),_:1,__:[4]}),t[5]||(t[5]=e("h1",{class:"text-2xl font-bold text-gray-900"},"资源点充值",-1))])])]),e("div",se,[e("div",oe,[e("div",le,[e("div",ae,[t[8]||(t[8]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"当前余额",-1)),e("div",ie,[t[7]||(t[7]=e("i",{class:"fas fa-coins text-yellow-500 text-3xl mr-4"},null,-1)),e("div",null,[e("span",ne,l(S.value.toLocaleString()),1),t[6]||(t[6]=e("span",{class:"text-sm text-gray-500 ml-2"},"点数",-1))])])]),e("div",re,[t[13]||(t[13]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"选择充值套餐",-1)),e("div",de,[(i(!0),a(j,null,A(N.value,s=>{var f,x;return i(),a("div",{key:s.id,onClick:z=>D(s),class:_(["relative p-4 border-2 rounded-lg cursor-pointer transition-all",((f=u.value)==null?void 0:f.id)===s.id?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"])},[s.recommended?(i(),a("div",ue,t[9]||(t[9]=[e("span",{class:"bg-red-500 text-white text-xs px-2 py-1 rounded-full"},"推荐",-1)]))):c("",!0),e("div",me,[e("div",ve,"¥"+l(s.price),1),e("div",ge,l(s.points.toLocaleString())+" 点数",1),s.bonus>0?(i(),a("div",fe," 赠送 "+l(s.bonus.toLocaleString())+" 点数 ",1)):c("",!0)]),((x=u.value)==null?void 0:x.id)===s.id?(i(),a("div",xe,t[10]||(t[10]=[e("i",{class:"fas fa-check-circle text-indigo-500"},null,-1)]))):c("",!0)],10,ce)}),128))]),e("div",be,[e("div",pe,[R(e("input",{type:"radio",id:"custom",name:"package","onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s),value:!0,class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[H,m.value]]),t[11]||(t[11]=e("label",{for:"custom",class:"ml-2 text-sm font-medium text-gray-700"}," 自定义金额 ",-1))]),m.value?(i(),a("div",ye,[e("div",_e,[e("div",he,[t[12]||(t[12]=e("span",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500"},"¥",-1)),R(e("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=s=>r.value=s),placeholder:"请输入充值金额",min:"1",max:"10000",class:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[J,r.value]])])]),e("div",we," = "+l(Math.floor(r.value*100).toLocaleString())+" 点数 ",1)])):c("",!0)])]),e("div",ke,[t[15]||(t[15]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"选择支付方式",-1)),e("div",Ce,[(i(!0),a(j,null,A(V.value,s=>{var f,x;return i(),a("div",{key:s.id,onClick:z=>v.value=s,class:_(["flex items-center p-4 border rounded-lg cursor-pointer transition-all",((f=v.value)==null?void 0:f.id)===s.id?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"])},[e("div",Se,[e("i",{class:_([s.icon,"text-2xl mr-3"])},null,2),e("div",null,[e("div",Ve,l(s.name),1),e("div",Le,l(s.description),1)])]),((x=v.value)==null?void 0:x.id)===s.id?(i(),a("div",Me,t[14]||(t[14]=[e("i",{class:"fas fa-check-circle text-indigo-500"},null,-1)]))):c("",!0)],10,Pe)}),128))])])]),e("div",je,[e("div",Ae,[t[20]||(t[20]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"订单摘要",-1)),e("div",Re,[e("div",Be,[t[16]||(t[16]=e("span",{class:"text-gray-600"},"充值金额",-1)),e("span",Ne,"¥"+l(p.value),1)]),e("div",De,[t[17]||(t[17]=e("span",{class:"text-gray-600"},"获得点数",-1)),e("span",Fe,l(L.value.toLocaleString())+" 点数",1)]),k.value>0?(i(),a("div",$e,[t[18]||(t[18]=e("span",{class:"text-green-600"},"赠送点数",-1)),e("span",Te,"+"+l(k.value.toLocaleString())+" 点数",1)])):c("",!0),e("div",ze,[e("div",Ee,[t[19]||(t[19]=e("span",{class:"text-gray-900 font-medium"},"总计点数",-1)),e("span",Ie,l(C.value.toLocaleString())+" 点数",1)])])]),e("div",Ue,[e("button",{onClick:F,disabled:!P.value||n.value,class:_(["w-full py-3 px-4 rounded-lg font-medium transition-colors",P.value&&!n.value?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[n.value?(i(),a("i",qe)):c("",!0),h(" "+l(n.value?"处理中...":`立即支付 ¥${p.value}`),1)],10,Oe)]),t[21]||(t[21]=K('<div class="mt-4 p-3 bg-blue-50 rounded-lg" data-v-43b9863c><div class="flex items-start" data-v-43b9863c><i class="fas fa-shield-alt text-blue-500 mt-1 mr-2" data-v-43b9863c></i><div class="text-sm text-blue-700" data-v-43b9863c><div class="font-medium mb-1" data-v-43b9863c>安全保障</div><ul class="text-xs space-y-1" data-v-43b9863c><li data-v-43b9863c>• 支付全程SSL加密</li><li data-v-43b9863c>• 7×24小时服务监控</li><li data-v-43b9863c>• 充值即时到账</li></ul></div></div></div>',1))])])])]),g.value?(i(),a("div",Ge,[e("div",He,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[2]||(t[2]=s=>g.value=!1)}),e("div",Je,[e("div",Ke,[t[25]||(t[25]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10"},[e("i",{class:"fas fa-credit-card text-blue-600"})],-1)),e("div",Qe,[t[24]||(t[24]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," 确认支付 ",-1)),e("div",We,[e("p",Xe,[t[22]||(t[22]=h(" 您即将支付 ")),e("strong",null,"¥"+l(p.value),1),t[23]||(t[23]=h("，获得 ")),e("strong",null,l(C.value.toLocaleString())+" 点数",1)]),e("p",Ye," 支付方式："+l((M=v.value)==null?void 0:M.name),1)])])]),e("div",Ze,[e("button",{type:"button",onClick:$,disabled:n.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[n.value?(i(),a("i",tt)):c("",!0),h(" "+l(n.value?"处理中...":"确认支付"),1)],8,et),e("button",{type:"button",onClick:t[3]||(t[3]=s=>g.value=!1),disabled:n.value,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"}," 取消 ",8,st)])])])])):c("",!0)])}}},it=E(ot,[["__scopeId","data-v-43b9863c"]]);export{it as default};
