import{o as r,c as l,a as e,_ as ce,C as de,D as ue,g as c,v as ge,h as ve,H as pe,n as m,F as B,i as I,y as te,z as me,b as u,u as i,A as he,d as xe,l as g,t as a,e as P,j as U,G as W,K as C}from"./index-f19ebc4a.js";import{r as se}from"./CpuChipIcon-576f530e.js";import{r as fe}from"./ChartBarIcon-fa691178.js";import{a as we,r as ye}from"./DocumentTextIcon-9f863586.js";import{r as _e}from"./MagnifyingGlassIcon-e9ac7f42.js";import{r as M}from"./ArrowPathIcon-48974b59.js";import{r as be}from"./ExclamationTriangleIcon-acab16c9.js";import{r as ke}from"./RectangleStackIcon-31e18f18.js";import{r as Ce}from"./XMarkIcon-af6b44b2.js";function Me(x,v){return r(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})])}function Ae(x,v){return r(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"})])}function je(x,v){return r(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}function $e(x,v){return r(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5"})])}function G(x,v){return r(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"})])}function De(x,v){return r(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"})])}function K(x,v){return r(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"})])}function oe(x,v){return r(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"})])}const Ve={class:"flex-1 overflow-y-auto"},Be={class:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-8"},Ie={class:"max-w-7xl mx-auto"},Pe={class:"flex flex-wrap gap-3"},Ne=["onClick"],Se={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Ze={class:"bg-white rounded-lg shadow-sm p-4 mb-6"},Ee={class:"flex flex-col sm:flex-row gap-4"},Le={class:"flex-1"},Te={class:"relative"},ze={class:"flex gap-2"},Fe=["title"],He={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-8"},Oe={key:0,class:"text-center py-12"},Je={key:1,class:"text-center py-12"},Ue={class:"text-gray-600 mb-6"},We={key:2,class:"text-center py-12"},Ge={class:"text-gray-600"},Ke={key:3,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Qe={class:"h-48 bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center relative overflow-hidden"},Re=["src","alt"],qe={key:1,class:"w-16 h-16 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center"},Xe={class:"p-6"},Ye={class:"flex items-center justify-between mb-4"},et={class:"text-lg font-semibold text-gray-800 line-clamp-1"},tt={class:"text-gray-600 text-sm mb-4 line-clamp-2"},st={class:"flex flex-wrap gap-2 mb-4"},ot={class:"category-pill bg-gray-100 text-gray-800"},rt={class:"flex items-center justify-between text-sm text-gray-500 mb-4"},at={class:"flex items-center"},lt={class:"flex items-center"},nt={class:"flex justify-between items-center"},it=["onClick"],ct=["onClick","disabled"],dt={key:4,class:"bg-white rounded-lg shadow-sm overflow-hidden"},ut={class:"divide-y divide-gray-200"},gt={class:"flex items-center justify-between"},vt={class:"flex items-center flex-1"},pt={class:"w-12 h-12 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center mr-4 relative overflow-hidden"},mt=["src","alt"],ht={class:"flex-1"},xt={class:"flex items-center gap-3 mb-2"},ft={class:"text-lg font-semibold text-gray-800"},wt={class:"text-gray-600 text-sm mb-2"},yt={class:"flex items-center gap-4 text-sm text-gray-500"},_t={class:"flex items-center"},bt={class:"flex items-center"},kt={class:"flex items-center"},Ct={class:"flex items-center gap-3 ml-6"},Mt=["onClick"],At=["onClick","disabled"],jt={key:5,class:"flex justify-center mt-8"},$t={class:"flex items-center space-x-2"},Dt=["disabled"],Vt=["onClick"],Bt=["disabled"],It={key:0,class:"fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center z-50 p-4"},Pt={class:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-screen overflow-hidden flex flex-col"},Nt={class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},St={key:0,class:"flex-1 overflow-y-auto p-6"},Zt={class:"flex flex-col md:flex-row gap-6"},Et={class:"md:w-1/3"},Lt={class:"h-48 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center mb-4 relative overflow-hidden"},Tt=["src","alt"],zt={key:1,class:"w-16 h-16 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center"},Ft={class:"space-y-4"},Ht={class:"space-y-2 text-sm"},Ot={class:"flex justify-between"},Jt={class:"flex justify-between"},Ut={class:"flex justify-between"},Wt={class:"flex justify-between"},Gt={class:"flex justify-between"},Kt={class:"flex items-center"},Qt={class:"flex justify-between"},Rt={class:"md:w-2/3"},qt={class:"text-xl font-semibold text-gray-900 mb-4"},Xt={class:"prose max-w-none"},Yt={class:"text-gray-600 mb-6"},es={class:"bg-gray-50 rounded-lg p-4"},ts={class:"text-sm text-gray-600 whitespace-pre-wrap"},ss={class:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3"},os=["disabled"],rs={__name:"AgentMarket",setup(x){const v=de(),A=ue(),N=c(!0),j=c(null),f=c([]),Q=c([]),w=c(""),y=c(""),$=c("popular"),_=c("grid"),d=c(1),S=c(12),Z=c(0),p=c([]),E=c(!1),n=c(null),L=c(null),b=ge(()=>Math.ceil(Z.value/S.value)),T=o=>{switch(o){case"data":case"数据处理":return se;case"nlp":case"自然语言处理":return ye;case"content":case"内容生成":return we;case"analysis":case"数据分析":return fe;case"experiment":case"实验":return Ae;case"automation":case"自动化":return $e;default:return se}},D=o=>({data:"数据处理",nlp:"自然语言处理",content:"内容生成",analysis:"数据分析",experiment:"实验",automation:"自动化"})[o]||o,z=o=>o===0?"text-sm font-medium text-green-600":"text-sm font-medium text-blue-600",R=o=>({data:"bg-blue-100 text-blue-800",nlp:"bg-purple-100 text-purple-800",content:"bg-green-100 text-green-800",analysis:"bg-amber-100 text-amber-800",experiment:"bg-pink-100 text-pink-800",automation:"bg-indigo-100 text-indigo-800"})[o]||"bg-gray-100 text-gray-800",q=o=>new Date(o).toLocaleDateString("zh-CN"),re=o=>{if(!o)return"暂无定义";if(typeof o=="string")try{return JSON.stringify(JSON.parse(o),null,2)}catch{return o}return JSON.stringify(o,null,2)},ae=()=>{const o=[];let s=Math.max(1,d.value-Math.floor(2.5)),h=Math.min(b.value,s+5-1);h-s<5-1&&(s=Math.max(1,h-5+1));for(let J=s;J<=h;J++)o.push(J);return o},k=async()=>{N.value=!0,j.value=null;try{const o={limit:S.value,offset:(d.value-1)*S.value};w.value&&(o.category=w.value),y.value.trim()&&(o.search=y.value.trim());const t=await C.getAgents(o);if(t.status==="success")f.value=t.data.agents||[],Z.value=t.data.pagination.total||0;else throw new Error(t.message||"获取工作流列表失败")}catch(o){console.error("获取工作流列表失败:",o),j.value="加载工作流失败："+(o.message||"未知错误"),f.value=[],Z.value=0}finally{N.value=!1}},le=async()=>{try{const o=await C.getAgentCategories();o.status==="success"&&(Q.value=o.data||[])}catch(o){console.error("获取分类列表失败:",o)}},X=o=>{w.value=o,d.value=1,k()},ne=()=>{L.value&&clearTimeout(L.value),L.value=setTimeout(()=>{d.value=1,k()},500)},Y=()=>{const o=[...f.value];switch($.value){case"popular":o.sort((t,s)=>(s.purchaseCount||0)-(t.purchaseCount||0));break;case"newest":o.sort((t,s)=>new Date(s.createdAt)-new Date(t.createdAt));break;case"rating":o.sort((t,s)=>(s.rating||0)-(t.rating||0));break;case"price_low":o.sort((t,s)=>(t.price||0)-(s.price||0));break;case"price_high":o.sort((t,s)=>(s.price||0)-(t.price||0));break}f.value=o},ie=()=>{_.value=_.value==="grid"?"list":"grid"},F=o=>{o>=1&&o<=b.value&&(d.value=o,k())},ee=async o=>{try{const t=await C.getAgent(o.id);if(t.status==="success")n.value=t.data,E.value=!0;else throw new Error(t.message||"获取工作流详情失败")}catch(t){console.error("获取工作流详情失败:",t),A.error("获取工作流详情失败："+(t.message||"未知错误"))}},V=()=>{E.value=!1,n.value=null},H=async o=>{if(!p.value.includes(o.id)){p.value.push(o.id);try{if(o.price===0){const t={name:o.name,description:o.description,definition:o.definition,status:"active",agentId:o.id},s=await C.createWorkflow(t);if(s.status==="success")A.success("工作流已添加到您的工作流列表"),V(),v.push("/workflows");else throw new Error(s.message||"添加工作流失败")}else{const t=await C.purchaseAgent(o.id);if(t.status==="success")A.success("购买成功！工作流已添加到您的工作流列表"),V(),v.push("/workflows");else throw new Error(t.message||"购买失败")}}catch(t){console.error("操作失败:",t),A.error(t.message||"操作失败，请稍后重试")}finally{p.value=p.value.filter(t=>t!==o.id)}}},O=o=>{o.target.style.display="none"};return ve(async()=>{await Promise.all([k(),le()])}),pe($,Y),(o,t)=>(r(),l("div",Ve,[e("div",Be,[e("div",Ie,[t[6]||(t[6]=e("h2",{class:"text-3xl font-bold mb-2"},"探索工作流",-1)),t[7]||(t[7]=e("p",{class:"text-lg mb-6"},"发现预构建的工作流，增强您的工作流程，提高效率和智能化水平",-1)),e("div",Pe,[e("button",{onClick:t[0]||(t[0]=s=>X("")),class:m(["px-4 py-2 rounded-lg font-medium transition-colors",w.value===""?"bg-white text-indigo-700":"bg-white/20 text-white hover:bg-white/30"])}," 所有工作流 ",2),(r(!0),l(B,null,I(Q.value,s=>(r(),l("button",{key:s,onClick:h=>X(s),class:m(["px-4 py-2 rounded-lg font-medium transition-colors",w.value===s?"bg-white text-indigo-700":"bg-white/20 text-white hover:bg-white/30"])},a(D(s)),11,Ne))),128))])])]),e("div",Se,[e("div",Ze,[e("div",Ee,[e("div",Le,[e("div",Te,[te(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>y.value=s),type:"text",placeholder:"搜索工作流...",class:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",onInput:ne},null,544),[[me,y.value]]),u(i(_e),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"})])]),e("div",ze,[te(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>$.value=s),onChange:Y,class:"px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},t[8]||(t[8]=[xe('<option value="popular" data-v-e34593f6>最受欢迎</option><option value="newest" data-v-e34593f6>最新发布</option><option value="rating" data-v-e34593f6>评分最高</option><option value="price_low" data-v-e34593f6>价格低到高</option><option value="price_high" data-v-e34593f6>价格高到低</option>',5)]),544),[[he,$.value]]),e("button",{onClick:ie,class:"px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors",title:_.value==="grid"?"切换到列表视图":"切换到网格视图"},[_.value==="grid"?(r(),g(i(Me),{key:0,class:"w-5 h-5"})):(r(),g(i(De),{key:1,class:"w-5 h-5"}))],8,Fe)])])])]),e("div",He,[N.value?(r(),l("div",Oe,[u(i(M),{class:"w-8 h-8 mx-auto mb-4 text-indigo-600 animate-spin"}),t[9]||(t[9]=e("p",{class:"text-gray-600"},"加载工作流...",-1))])):j.value?(r(),l("div",Je,[u(i(be),{class:"w-16 h-16 mx-auto mb-4 text-red-500"}),t[11]||(t[11]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"加载失败",-1)),e("p",Ue,a(j.value),1),e("button",{onClick:k,class:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors"},[u(i(M),{class:"w-5 h-5 mr-2"}),t[10]||(t[10]=P(" 重试 "))])])):f.value.length===0?(r(),l("div",We,[u(i(ke),{class:"w-16 h-16 mx-auto mb-4 text-gray-400"}),t[12]||(t[12]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"暂无工作流",-1)),e("p",Ge,a(y.value?"没有找到匹配的工作流":"当前分类下暂无工作流"),1)])):_.value==="grid"?(r(),l("div",Ke,[(r(!0),l(B,null,I(f.value,s=>(r(),l("div",{key:s.id,class:"bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 hover:-translate-y-1 overflow-hidden border border-gray-100"},[e("div",Qe,[s.coverImage?(r(),l("img",{key:0,src:s.coverImage,alt:s.name,class:"w-full h-full object-cover",onError:O},null,40,Re)):(r(),l("div",qe,[(r(),g(W(T(s.category)),{class:"w-8 h-8 text-white"}))]))]),e("div",Xe,[e("div",Ye,[e("h4",et,a(s.name),1),e("span",{class:m(z(s.price))},a(s.price===0?"免费":`${s.price} 积分`),3)]),e("p",tt,a(s.description||"暂无描述"),1),e("div",st,[e("span",{class:m(["category-pill",R(s.category)])},a(D(s.category)),3),e("span",ot,a(s.type),1)]),e("div",rt,[e("div",at,[u(i(oe),{class:"w-4 h-4 mr-1"}),e("span",null,a(s.purchaseCount||0)+" 人使用",1)]),e("div",lt,[u(i(K),{class:"w-4 h-4 mr-1 text-yellow-500"}),e("span",null,a((s.rating||0).toFixed(1)),1)])]),e("div",nt,[e("button",{onClick:h=>ee(s),class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium transition-colors"}," 查看详情 ",8,it),e("button",{onClick:h=>H(s),disabled:p.value.includes(s.id),class:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white text-sm py-2 px-4 rounded-lg transition-colors flex items-center"},[p.value.includes(s.id)?(r(),g(i(M),{key:0,class:"w-4 h-4 mr-1 animate-spin"})):(r(),g(i(G),{key:1,class:"w-4 h-4 mr-1"})),P(" "+a(s.price===0?"免费使用":"立即购买"),1)],8,ct)])])]))),128))])):(r(),l("div",dt,[e("div",ut,[(r(!0),l(B,null,I(f.value,s=>(r(),l("div",{key:s.id,class:"p-6 hover:bg-gray-50 transition-colors"},[e("div",gt,[e("div",vt,[e("div",pt,[s.coverImage?(r(),l("img",{key:0,src:s.coverImage,alt:s.name,class:"w-full h-full object-cover rounded-lg",onError:O},null,40,mt)):(r(),g(W(T(s.category)),{key:1,class:"w-6 h-6 text-white"}))]),e("div",ht,[e("div",xt,[e("h4",ft,a(s.name),1),e("span",{class:m(z(s.price))},a(s.price===0?"免费":`${s.price} 积分`),3),e("span",{class:m(["category-pill",R(s.category)])},a(D(s.category)),3)]),e("p",wt,a(s.description||"暂无描述"),1),e("div",yt,[e("div",_t,[u(i(oe),{class:"w-4 h-4 mr-1"}),e("span",null,a(s.purchaseCount||0)+" 人使用",1)]),e("div",bt,[u(i(K),{class:"w-4 h-4 mr-1 text-yellow-500"}),e("span",null,a((s.rating||0).toFixed(1)),1)]),e("div",kt,[u(i(je),{class:"w-4 h-4 mr-1"}),e("span",null,a(q(s.createdAt)),1)])])])]),e("div",Ct,[e("button",{onClick:h=>ee(s),class:"text-indigo-600 hover:text-indigo-800 text-sm font-medium transition-colors"}," 查看详情 ",8,Mt),e("button",{onClick:h=>H(s),disabled:p.value.includes(s.id),class:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white text-sm py-2 px-4 rounded-lg transition-colors flex items-center"},[p.value.includes(s.id)?(r(),g(i(M),{key:0,class:"w-4 h-4 mr-1 animate-spin"})):(r(),g(i(G),{key:1,class:"w-4 h-4 mr-1"})),P(" "+a(s.price===0?"免费使用":"立即购买"),1)],8,At)])])]))),128))])])),b.value>1?(r(),l("div",jt,[e("div",$t,[e("button",{onClick:t[3]||(t[3]=s=>F(d.value-1)),disabled:d.value===1,class:m(["px-3 py-2 rounded-lg border border-gray-300 transition-colors",d.value===1?"opacity-50 cursor-not-allowed bg-gray-100":"bg-white hover:bg-gray-50"])}," 上一页 ",10,Dt),(r(!0),l(B,null,I(ae(),s=>(r(),l("button",{key:s,onClick:h=>F(s),class:m(["px-3 py-2 rounded-lg border transition-colors",s===d.value?"bg-indigo-600 text-white border-indigo-600":"bg-white border-gray-300 hover:bg-gray-50"])},a(s),11,Vt))),128)),e("button",{onClick:t[4]||(t[4]=s=>F(d.value+1)),disabled:d.value===b.value,class:m(["px-3 py-2 rounded-lg border border-gray-300 transition-colors",d.value===b.value?"opacity-50 cursor-not-allowed bg-gray-100":"bg-white hover:bg-gray-50"])}," 下一页 ",10,Bt)])])):U("",!0)]),E.value?(r(),l("div",It,[e("div",Pt,[e("div",Nt,[t[13]||(t[13]=e("h3",{class:"text-lg font-medium text-gray-900"},"工作流详情",-1)),e("button",{onClick:V,class:"text-gray-400 hover:text-gray-500"},[u(i(Ce),{class:"w-6 h-6"})])]),n.value?(r(),l("div",St,[e("div",Zt,[e("div",Et,[e("div",Lt,[n.value.coverImage?(r(),l("img",{key:0,src:n.value.coverImage,alt:n.value.name,class:"w-full h-full object-cover rounded-lg",onError:O},null,40,Tt)):(r(),l("div",zt,[(r(),g(W(T(n.value.category)),{class:"w-8 h-8 text-white"}))]))]),e("div",Ft,[e("div",null,[t[20]||(t[20]=e("h4",{class:"font-medium text-gray-900 mb-2"},"基本信息",-1)),e("div",Ht,[e("div",Ot,[t[14]||(t[14]=e("span",{class:"text-gray-500"},"价格:",-1)),e("span",{class:m(z(n.value.price))},a(n.value.price===0?"免费":`${n.value.price} 积分`),3)]),e("div",Jt,[t[15]||(t[15]=e("span",{class:"text-gray-500"},"分类:",-1)),e("span",null,a(D(n.value.category)),1)]),e("div",Ut,[t[16]||(t[16]=e("span",{class:"text-gray-500"},"类型:",-1)),e("span",null,a(n.value.type),1)]),e("div",Wt,[t[17]||(t[17]=e("span",{class:"text-gray-500"},"使用次数:",-1)),e("span",null,a(n.value.purchaseCount||0),1)]),e("div",Gt,[t[18]||(t[18]=e("span",{class:"text-gray-500"},"评分:",-1)),e("div",Kt,[u(i(K),{class:"w-4 h-4 text-yellow-500 mr-1"}),e("span",null,a((n.value.rating||0).toFixed(1)),1)])]),e("div",Qt,[t[19]||(t[19]=e("span",{class:"text-gray-500"},"发布时间:",-1)),e("span",null,a(q(n.value.createdAt)),1)])])])])]),e("div",Rt,[e("h4",qt,a(n.value.name),1),e("div",Xt,[e("p",Yt,a(n.value.description||"暂无详细描述"),1),e("div",es,[t[21]||(t[21]=e("h5",{class:"font-medium text-gray-900 mb-2"},"工作流定义",-1)),e("pre",ts,a(re(n.value.definition)),1)])])])])])):U("",!0),e("div",ss,[e("button",{onClick:V,class:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-lg transition-colors"}," 关闭 "),e("button",{onClick:t[5]||(t[5]=s=>H(n.value)),disabled:p.value.includes(n.value.id),class:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white py-2 px-4 rounded-lg transition-colors flex items-center"},[p.value.includes(n.value.id)?(r(),g(i(M),{key:0,class:"w-4 h-4 mr-1 animate-spin"})):(r(),g(i(G),{key:1,class:"w-4 h-4 mr-1"})),P(" "+a(n.value.price===0?"免费使用":"立即购买"),1)],8,os)])])])):U("",!0)]))}},ps=ce(rs,[["__scopeId","data-v-e34593f6"]]);export{ps as default};
