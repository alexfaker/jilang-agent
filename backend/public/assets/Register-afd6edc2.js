import{_ as $,C as B,q as w,g as C,c,a as e,b as l,w as _,n as m,l as h,u as d,t as p,j as f,x as q,y as g,z as k,Q as N,R,e as u,d as H,r as U,o as a,B as D}from"./index-f19ebc4a.js";import{_ as P}from"./BrandLogo-4a489162.js";import{r as S}from"./CheckCircleIcon-a0df62da.js";import{r as A}from"./ExclamationTriangleIcon-acab16c9.js";import{r as E}from"./XMarkIcon-af6b44b2.js";import{r as L}from"./UserIcon-3c95a798.js";import{r as O,a as V,b as Z,c as F}from"./LockClosedIcon-de05a7d5.js";import"./CpuChipIcon-576f530e.js";const I={class:"min-h-screen bg-gray-50"},Q={class:"bg-white shadow-sm"},G={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},J={class:"flex justify-between h-16"},K={class:"flex items-center"},W={class:"flex items-center"},X={class:"flex-grow flex items-center justify-center px-4 sm:px-6 lg:px-8 py-12"},Y={class:"max-w-md w-full"},ee={class:"auth-card bg-white p-8 rounded-2xl shadow-lg"},se={class:"flex items-center justify-center mb-8"},te={class:"flex"},re={class:"flex-shrink-0"},oe={class:"ml-3"},ae={class:"ml-auto pl-3"},ne={class:"mt-1 relative"},ie={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},le={key:0,class:"mt-2 text-sm text-red-600"},de={class:"mt-1 relative"},ce={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},me={key:0,class:"mt-2 text-sm text-red-600"},ue={class:"mt-1 relative"},pe={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},fe=["type"],ge={key:0,class:"mt-2 text-sm text-red-600"},ve={class:"mt-1 relative"},xe={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},be={key:0,class:"mt-2 text-sm text-red-600"},he={class:"flex items-start"},ye={class:"flex items-center h-5"},we=["disabled"],_e={key:0,class:"flex items-center"},ke={key:1},Ce={class:"mt-6 text-center text-sm text-gray-600"},Pe={__name:"Register",setup(Ve){const j=B(),t=w({username:"",email:"",password:"",confirmPassword:"",agreeToTerms:!1}),v=C(!1),x=C(!1),o=w({}),n=w({show:!1,type:"error",message:""}),z=()=>{x.value=!x.value},b=(r,s)=>{n.show=!0,n.type=r,n.message=s,setTimeout(()=>{n.show=!1},5e3)},M=()=>{const r={};return t.username.trim()?t.username.length<3?r.username="用户名至少3个字符":/^[a-zA-Z0-9_]+$/.test(t.username)||(r.username="用户名只能包含字母、数字和下划线"):r.username="用户名不能为空",t.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)||(r.email="请输入有效的邮箱地址"):r.email="邮箱不能为空",t.password?t.password.length<8&&(r.password="密码长度至少8位"):r.password="密码不能为空",t.confirmPassword?t.password!==t.confirmPassword&&(r.confirmPassword="两次输入的密码不一致"):r.confirmPassword="请确认密码",Object.keys(o).forEach(s=>delete o[s]),Object.assign(o,r),Object.keys(r).length===0},T=async()=>{if(!M()){b("error","请检查表单输入");return}if(!t.agreeToTerms){b("error","请同意服务条款和隐私政策");return}v.value=!0;try{const r={username:t.username.trim(),email:t.email.trim(),password:t.password},s=await D.register(r);b("success","注册成功！正在跳转到登录页面..."),setTimeout(()=>{j.push({name:"Login",query:{message:"registration_success"}})},2e3)}catch(r){console.error("注册失败:",r);let s="注册失败，请稍后重试";r.response&&r.response.data&&r.response.data.message?s=r.response.data.message:r.message&&(s=r.message),b("error",s)}finally{v.value=!1}};return(r,s)=>{const y=U("router-link");return a(),c("div",I,[e("nav",Q,[e("div",G,[e("div",J,[e("div",K,[l(y,{to:"/",class:"flex-shrink-0"},{default:_(()=>[l(P,{size:"base"})]),_:1})]),e("div",W,[l(y,{to:"/auth/login",class:"text-gray-500 hover:text-gray-700 px-3 py-2 rounded-md text-sm font-medium transition-colors"},{default:_(()=>s[6]||(s[6]=[u(" 登录 ")])),_:1,__:[6]})])])])]),e("div",X,[e("div",Y,[e("div",ee,[e("div",se,[l(P,{size:"lg",spacing:"loose"})]),n.show?(a(),c("div",{key:0,class:m(["rounded-md p-4 mb-6",n.type==="success"?"bg-green-50":"bg-red-50"])},[e("div",te,[e("div",re,[n.type==="success"?(a(),h(d(S),{key:0,class:"h-5 w-5 text-green-400"})):(a(),h(d(A),{key:1,class:"h-5 w-5 text-red-400"}))]),e("div",oe,[e("h3",{class:m(["text-sm font-medium",n.type==="success"?"text-green-800":"text-red-800"])},p(n.message),3)]),e("div",ae,[e("button",{onClick:s[0]||(s[0]=i=>n.show=!1),class:m(["inline-flex text-sm",n.type==="success"?"text-green-500 hover:text-green-400":"text-red-500 hover:text-red-400"])},[l(d(E),{class:"h-4 w-4"})],2)])])],2)):f("",!0),e("form",{class:"space-y-6",onSubmit:q(T,["prevent"])},[e("div",null,[s[7]||(s[7]=e("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"用户名",-1)),e("div",ne,[e("div",ie,[l(d(L),{class:"h-5 w-5 text-gray-400"})]),g(e("input",{id:"username",name:"username",type:"text",autocomplete:"username",required:"","onUpdate:modelValue":s[1]||(s[1]=i=>t.username=i),class:m([{"border-red-300":o.username},"auth-input appearance-none block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all"]),placeholder:"请输入用户名"},null,2),[[k,t.username]])]),o.username?(a(),c("p",le,p(o.username),1)):f("",!0)]),e("div",null,[s[8]||(s[8]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"邮箱地址",-1)),e("div",de,[e("div",ce,[l(d(O),{class:"h-5 w-5 text-gray-400"})]),g(e("input",{id:"email",name:"email",type:"email",autocomplete:"email",required:"","onUpdate:modelValue":s[2]||(s[2]=i=>t.email=i),class:m([{"border-red-300":o.email},"auth-input appearance-none block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all"]),placeholder:"请输入邮箱地址"},null,2),[[k,t.email]])]),o.email?(a(),c("p",me,p(o.email),1)):f("",!0)]),e("div",null,[s[9]||(s[9]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"密码",-1)),e("div",ue,[e("div",pe,[l(d(V),{class:"h-5 w-5 text-gray-400"})]),g(e("input",{id:"password",name:"password",type:x.value?"text":"password",autocomplete:"new-password",required:"","onUpdate:modelValue":s[3]||(s[3]=i=>t.password=i),class:m([{"border-red-300":o.password},"auth-input appearance-none block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all"]),placeholder:"请输入密码（至少8位）"},null,10,fe),[[N,t.password]]),e("button",{type:"button",onClick:z,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[x.value?(a(),h(d(F),{key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-600"})):(a(),h(d(Z),{key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-600"}))])]),s[10]||(s[10]=e("p",{class:"mt-1 text-xs text-gray-500"},"密码长度至少8位，包含字母和数字",-1)),o.password?(a(),c("p",ge,p(o.password),1)):f("",!0)]),e("div",null,[s[11]||(s[11]=e("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700"},"确认密码",-1)),e("div",ve,[e("div",xe,[l(d(V),{class:"h-5 w-5 text-gray-400"})]),g(e("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autocomplete:"new-password",required:"","onUpdate:modelValue":s[4]||(s[4]=i=>t.confirmPassword=i),class:m([{"border-red-300":o.confirmPassword},"auth-input appearance-none block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all"]),placeholder:"请再次输入密码"},null,2),[[k,t.confirmPassword]])]),o.confirmPassword?(a(),c("p",be,p(o.confirmPassword),1)):f("",!0)]),e("div",he,[e("div",ye,[g(e("input",{id:"terms",name:"terms",type:"checkbox",required:"","onUpdate:modelValue":s[5]||(s[5]=i=>t.agreeToTerms=i),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,512),[[R,t.agreeToTerms]])]),s[12]||(s[12]=e("div",{class:"ml-3 text-sm"},[e("label",{for:"terms",class:"font-medium text-gray-700"},[u("我同意 "),e("a",{href:"#",class:"text-indigo-600 hover:text-indigo-500"},"服务条款"),u(" 和 "),e("a",{href:"#",class:"text-indigo-600 hover:text-indigo-500"},"隐私政策")])],-1))]),e("div",null,[e("button",{type:"submit",disabled:v.value,class:"auth-btn w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all hover:transform hover:-translate-y-0.5"},[v.value?(a(),c("span",_e,s[13]||(s[13]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),u(" 注册中... ")]))):(a(),c("span",ke,"注册"))],8,we)])],32),s[14]||(s[14]=H('<div class="mt-6" data-v-7b16c7f3><div class="relative" data-v-7b16c7f3><div class="absolute inset-0 flex items-center" data-v-7b16c7f3><div class="w-full border-t border-gray-300" data-v-7b16c7f3></div></div><div class="relative flex justify-center text-sm" data-v-7b16c7f3><span class="px-2 bg-white text-gray-500" data-v-7b16c7f3> 或通过以下方式注册 </span></div></div><div class="mt-6 grid grid-cols-3 gap-3" data-v-7b16c7f3><button type="button" class="w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 transition-colors" data-v-7b16c7f3><svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24" data-v-7b16c7f3><path d="M12 0C5.37 0 0 5.37 0 12 0 17.31 3.435 21.795 8.205 23.385 8.805 23.49 9.03 23.13 9.03 22.815L9.015 20.91C5.672 21.675 4.968 19.35 4.968 19.35 4.422 17.94 3.633 17.583 3.633 17.583 2.546 16.791 3.717 16.806 3.717 16.806 4.922 16.896 5.555 18.084 5.555 18.084 6.625 19.932 8.364 19.401 9.048 19.088 9.155 18.311 9.466 17.78 9.81 17.475 7.145 17.167 4.344 16.125 4.344 11.475 4.344 10.147 4.809 9.057 5.579 8.207 5.444 7.896 5.039 6.651 5.684 4.992 5.684 4.992 6.689 4.651 8.984 6.207 10.189 5.962 11.496 5.962 12.803 6.207 15.097 4.651 16.103 4.992 16.103 4.992 16.748 6.651 16.343 7.896 16.208 8.207 16.978 9.057 17.443 10.147 17.443 11.475 17.443 16.134 14.641 17.167 11.976 17.475 12.32 17.78 12.631 18.311 12.738 19.088 13.422 19.401 15.161 19.932 16.231 18.084 16.864 16.896 18.069 16.806 18.069 16.806 19.24 16.791 18.153 17.583 17.364 17.94 16.818 19.35 16.818 19.35 16.114 21.675 12.97 20.91L12.955 22.815C12.955 23.13 13.18 23.49 13.78 23.385 18.55 21.795 21.985 17.31 21.985 12 22 5.37 16.63.015 12 0Z" data-v-7b16c7f3></path></svg></button><button type="button" class="w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 transition-colors" data-v-7b16c7f3><svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24" data-v-7b16c7f3><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" data-v-7b16c7f3></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" data-v-7b16c7f3></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" data-v-7b16c7f3></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" data-v-7b16c7f3></path></svg></button><button type="button" class="w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 transition-colors" data-v-7b16c7f3><svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24" data-v-7b16c7f3><path d="M18.73 5.73h-5.06V3.59c0-1.35.87-1.66 1.48-1.66h3.45V.11S17.56 0 16.53 0c-2.68 0-4.37 1.04-4.37 3.14v2.59H9.33v1.94h2.83v7.75c.85.13 1.72.2 2.6.2.88 0 1.75-.07 2.6-.2V7.67h2.25l.37-1.94z" data-v-7b16c7f3></path></svg></button></div></div>',1))]),e("p",Ce,[s[16]||(s[16]=u(" 已有账户? ")),l(y,{to:"/auth/login",class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:_(()=>s[15]||(s[15]=[u(" 登录 ")])),_:1,__:[15]})])])])])}}},Re=$(Pe,[["__scopeId","data-v-7b16c7f3"]]);export{Re as default};
